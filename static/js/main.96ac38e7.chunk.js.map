{"version":3,"sources":["components/Payoff.js","components/StockData.js","store/actions/stockData.js","utility/Option.js","utility/constants.js","utility/options.js","components/Panel.js","store/reducers/stockData.js","App.js","serviceWorker.js","index.js"],"names":["Payoff","data","useEffect","myData","nv","chart","lineChart","margin","left","useInteractiveGuideline","duration","showLegend","showYAxis","showXAxis","xAxis","axisLabel","tickFormat","d3","yAxis","datum","call","windowResize","update","className","id","StockData","props","stockData","useSelector","state","dispatch","useDispatch","console","log","type","placeholder","value","currentPrice","onChange","e","price","target","volatility","interest","Option","contractName","this","strike","date","direction","amount","evaluatePayoffFunc","option","cost","Math","max","parseInt","min","CND","x","k","exp","sqrt","PI","Contract","removeContract","updateContract","dateDiff","moment","diff","optionType","S","X","T","r","v","d1","d2","BlackScholes","toFixed","style","verticalAlign","aria-label","onClick","aria-hidden","Panel","portfolio","setPortfolio","visualize","property","newPortfolio","Date","toISOString","result","push","key","renderContracts","initialState","data1","values","y","color","initialPortfolio","rootReducer","combineReducers","action","store","createStore","App","useState","setData","errors","fetchData","a","updateData","strikes","maxStrike","contract","util","changeData","Boolean","window","location","hostname","match","b","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.96ac38e7.chunk.js","sourcesContent":["import React from \"react\";\nimport { useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport * as nv from \"nvd3\";\n\nconst drawChart = (myData) => {\n  /*These lines are all chart setup.  Pick and choose which chart features you want to utilize. */\n  nv.addGraph(function () {\n    var chart = nv.models\n      .lineChart()\n      .margin({ left: 100 }) //Adjust chart margins to give the x-axis some breathing room.\n      .useInteractiveGuideline(true) //We want nice looking tooltips and a guideline!\n      .duration(1500) //how fast do you want the lines to transition?\n      .showLegend(true) //Show the legend, allowing users to turn on/off line series.\n      .showYAxis(true) //Show the y-axis\n      .showXAxis(true); //Show the x-axis\n    chart.xAxis //Chart x-axis settings\n      .axisLabel(\"Price ($)\")\n      .tickFormat(d3.format(\",r\"));\n\n    chart.yAxis //Chart y-axis settings\n      .axisLabel(\"Profit ($)\")\n      .tickFormat(d3.format(\".02f\"));\n\n    d3.select(\"#chart svg\") //Select the <svg> element you want to render the chart in.\n      .datum(myData) //Populate the <svg> element with chart data...\n      .call(chart); //Finally, render the chart!\n\n    //Update the chart when window resizes.\n    nv.utils.windowResize(function () {\n      chart.update();\n    });\n\n    return chart;\n  });\n  /**************************************\n   * Simple test data generator\n   */\n};\n\nconst Payoff = ({ data }) => {\n  \n  useEffect(() => {\n    drawChart(data);\n  }, [data]);\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-sm-12\">\n        <div className=\"panel panel-primary\">\n          <div className=\"panel-heading\">Option Payoff</div>\n          <div className=\"panel-body\">\n            <div id=\"chart\">\n              <svg></svg>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default Payoff;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as stockActions from \"../store/actions/stockData\";\n\nconst StockData = (props) => {\n  const stockData = useSelector((state) => state.stockData);\n  const dispatch = useDispatch();\n\n  console.log(stockData);\n\n  return (\n    <div className=\"panel panel-primary\">\n      <div className=\"panel-heading\">Underlying stock</div>\n\n      {/* <select id=\"direction\" className=\"form-control\">\n        {data.tickers.map((ticker) => (\n          <option key={ticker.value}>{ticker.value}</option>\n        ))}\n      </select> */}\n\n      <div className=\"panel-body\">\n        <form className=\"form-horizontal\">\n          <div className=\"form-group\">\n            <label className=\"col-sm-5 control-label\">Current price ($)</label>\n            <div className=\"col-sm-7\">\n              <input\n                type=\"number\"\n                placeholder=\"CurrentPrice\"\n                className=\"form-control\"\n                value={stockData.currentPrice}\n                onChange={(e) =>\n                  dispatch(stockActions.updatePrice(e.target.value))\n                }\n              />\n            </div>\n          </div>\n          <div className=\"form-group\">\n            <label className=\"col-sm-5 control-label\">Volatility (%)</label>\n            <div className=\"col-sm-7\">\n              <input\n                type=\"number\"\n                placeholder=\"Volatility\"\n                className=\"form-control\"\n                value={stockData.volatility}\n                onChange={(e) =>\n                  dispatch(stockActions.updateVolatility(e.target.value))\n                }\n              />\n            </div>\n          </div>\n          <div className=\"form-group\">\n            <label className=\"col-sm-5 control-label\">Interest Rate (%)</label>\n            <div className=\"col-sm-7\">\n              <input\n                type=\"number\"\n                placeholder=\"Interest Rate\"\n                className=\"form-control\"\n                value={stockData.interest}\n                onChange={(e) =>\n                  dispatch(stockActions.updateInterest(e.target.value))\n                }\n              />\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default StockData;\n","export const UPDATE_PRICE = \"UPDATE_PRICE\";\nexport const UPDATE_VOLATILITY = \"UPDATE_VOLATILITY\";\nexport const UPDATE_INTEREST = \"UPDATE_INTEREST\";\n\nexport const updatePrice = (price) => {\n  return {\n    type: UPDATE_PRICE,\n    price,\n  };\n};\n\nexport const updateVolatility = (volatility) => {\n  return {\n    type: UPDATE_VOLATILITY,\n    volatility,\n  };\n};\n\nexport const updateInterest = (interest) => {\n  return {\n    type: UPDATE_INTEREST,\n    interest,\n  };\n};\n","import * as cts from \"./constants\";\n\nexport default class Option {\n  constructor(contractName) {\n    this.contractName = contractName;\n    this.strike = \"\";\n    this.date = \"\";\n    this.direction = cts.BUY;\n    this.type = cts.CALL;\n    this.amount = 1;\n  }\n}\n","export const BUY = \"Buy\"\nexport const SELL = \"Sell\"\nexport const CALL = \"Call\"\nexport const PUT = \"Put\"\nexport const CASH = \"Cash\"","import * as cts from \"./constants\";\n\nexport const getPayoffData = (options) => {\n  const maxStrike = getMaxStrike(options);\n  const length = Math.floor(maxStrike * 1.25);\n  const keys = Object.keys(options);\n  const data = new Array(length).fill(0);\n  const labels = [];\n  const cost = getTotalCost(options);\n\n  for (let i = 0; i < data.length; i++) {\n    labels.push(i);\n    fillPayoffArray(data, i, options, keys, cost);\n  }\n\n  return { data, labels };\n};\n\nexport const evaluatePayoffFunc = (option, price) => {\n  const cost = option.price * option.amount;\n  if (option.type === cts.CALL) {\n    // A call Option\n    if (option.direction === cts.BUY) {\n      // Long Call\n      return (\n        Math.max(price - parseInt(option.strike), 0) * option.amount - cost\n      );\n    }\n    // Short Call\n    return Math.min(0, option.strike - price) * option.amount + cost;\n  } else if (option.type === cts.PUT) {\n    // A Put Option\n    if (option.direction === cts.BUY) {\n      // Long Put\n      return Math.max(parseInt(option.strike) - price, 0) * option.amount - cost;\n    }\n    // Short Put\n    return Math.min(0, price - option.strike) * option.amount + cost\n  } else if (option.type === cts.CASH) {\n    // Stock \n    if (option.direction === cts.BUY) {\n      // Long Stock\n      return (price - option.strike) * option.amount;\n    }\n    // Short Stock\n    return (option.strike - price) * option.amount;\n  }\n};\n\nexport const getMaxStrike = (options) => {\n  const keys = Object.keys(options);\n  let max = 0;\n  keys.forEach((key) => {\n    if (options[key].strike > max) {\n      max = options[key].strike;\n    }\n  });\n  return max;\n};\n\nconst fillPayoffArray = (matrix, index, options, keys, cost) => {\n  for (let i = 0; i < keys.length; i++) {\n    matrix[index] += evaluatePayoffFunc(options[keys[i]], index) - cost;\n  }\n};\n\nconst getTotalCost = (options) => {\n  const keys = Object.keys(options);\n  let cost = 0;\n  keys.forEach((key) => {\n    if (options[key].contractName.includes(\"SHORT\")) {\n      cost -= options[key].bid * options[key].amount;\n    } else {\n      cost += options[key].ask * options[key].amount;\n    }\n  });\n  return cost;\n};\n\n/* Idea behind displaying the graph\n\n 1. Get the Critical X values in the graph\n 2. Evaluate the critical X values and add them to the proper format\n 3. Update the state and render the result\n\n 1. How to find critical x values\n  - x = 0 will always be a critical value\n  - x = strike prices will always be c.v\n  - x = maxStrike * 1.2 will always be critical value\n\n2. We have defined a evaluatePayoffFunc above and use it in all critical points\n\n */\n\n/*\n  S = Current Stock Price\n  X = Exercise Price (Strike)\n  r = Short-term risk free interest rate\n  T = Time remaining to the expiration Date (in years)\n  v = Standard deviation of stock price (implied volatility)\n */\n\nexport function BlackScholes(optionType, S, X, T, r, v) {\n  var d1 = (Math.log(S / X) + (r + (v * v) / 2) * T) / (v * Math.sqrt(T));\n  var d2 = d1 - v * Math.sqrt(T);\n  if (optionType === cts.CALL) {\n    return S * CND(d1) - X * Math.exp(-r * T) * CND(d2);\n  } else {\n    return X * Math.exp(-r * T) * CND(-d2) - S * CND(-d1);\n  }\n}\n\n/* The cummulative Normal distribution function: */\nfunction CND(x) {\n  if (x < 0) {\n    return 1 - CND(-x);\n  } else {\n    let k = 1 / (1 + 0.2316419 * x);\n    return (\n      1 -\n      (Math.exp((-x * x) / 2) / Math.sqrt(2 * Math.PI)) *\n        k *\n        (0.31938153 +\n          k *\n            (-0.356563782 +\n              k * (1.781477937 + k * (-1.821255978 + k * 1.330274429))))\n    );\n  }\n}\n","import React, { useEffect } from \"react\";\nimport Option from \"../utility/Option\";\nimport { BlackScholes } from \"../utility\";\nimport { useSelector } from \"react-redux\";\nimport moment from \"moment\";\n\nconst Contract = (props) => {\n  const { removeContract, data, updateContract, currentPrice } = props;\n  const stockData = useSelector((state) => state.stockData);\n\n  const dateDiff = -moment().diff(data.date, \"years\", true);\n\n  // Calculate the price based on Black-Scholes model\n  const price = BlackScholes(\n    data.type,\n    +stockData.currentPrice,\n    +data.strike,\n    dateDiff,\n    +stockData.interest,\n    +stockData.volatility\n  ).toFixed(2);\n\n  // Update the price every time it changes\n  useEffect(() => {\n    updateContract(data.contractName, \"price\", price);\n  }, [price]);\n\n  return (\n    <tr>\n      <td>\n        <select\n          id=\"direction\"\n          className=\"form-control\"\n          onChange={(e) =>\n            updateContract(data.contractName, \"direction\", e.target.value)\n          }\n        >\n          <option>Buy</option>\n          <option>Sell</option>\n        </select>\n      </td>\n      <td>\n        <input\n          type=\"number\"\n          placeholder=\"Amount\"\n          className=\"form-control form-control-inline\"\n          onChange={(e) =>\n            updateContract(data.contractName, \"amount\", e.target.value)\n          }\n          value={data.amount}\n        />\n      </td>\n      <td>\n        <select\n          className=\"form-control\"\n          onChange={(e) =>\n            updateContract(data.contractName, \"type\", e.target.value)\n          }\n        >\n          <option>Call</option>\n          <option>Put</option>\n          <option>Cash</option>\n        </select>\n      </td>\n      <td>\n        <input\n          type=\"number\"\n          placeholder=\"Strike\"\n          className=\"form-control form-control-inline\"\n          onChange={(e) =>\n            updateContract(data.contractName, \"strike\", e.target.value)\n          }\n          value={data.strike}\n        />\n      </td>\n      <td>\n        <input\n          type=\"date\"\n          placeholder=\"Expiry\"\n          className=\"form-control form-control-inline\"\n          onChange={(e) =>\n            updateContract(data.contractName, \"date\", e.target.value)\n          }\n          value={data.date}\n        />\n      </td>\n      <td style={{ verticalAlign: \"middle\" }}>\n        {console.log(data.type, +currentPrice, +data.strike)}\n        <b>{price}</b>\n      </td>\n      <td style={{ verticalAlign: \"middle\" }}>\n        <b>1.00</b>\n      </td>\n      <td style={{ verticalAlign: \"middle\" }}>\n        <button\n          type=\"button\"\n          aria-label=\"Left Align\"\n          className=\"btn btn-danger btn-s\"\n          onClick={() => removeContract(data.contractName)}\n        >\n          <span aria-hidden=\"true\">Remove</span>\n        </button>\n      </td>\n    </tr>\n  );\n};\n\nconst DUMMY_DATA = [1, 2, 3, 4];\n\nconst Panel = (props) => {\n  const { portfolio, setPortfolio, visualize, currentPrice } = props;\n\n  const addOption = () => {\n    const newPortfolio = { ...portfolio };\n    const id = new Date().toISOString();\n    newPortfolio[id] = new Option(id);\n    setPortfolio(newPortfolio);\n  };\n\n  const renderContracts = () => {\n    const result = [];\n    for (let id in portfolio) {\n      result.push(\n        <Contract\n          removeContract={removeContract}\n          updateContract={updateContract}\n          currentPrice={currentPrice}\n          data={portfolio[id]}\n          key={id}\n        />\n      );\n    }\n    return result;\n  };\n\n  const updateContract = (id, property, value) => {\n    const newPortfolio = { ...portfolio };\n    newPortfolio[id][property] = value;\n    setPortfolio(newPortfolio);\n  };\n\n  const removeContract = (id) => {\n    const newPortfolio = { ...portfolio };\n    delete newPortfolio[id];\n    setPortfolio(newPortfolio);\n  };\n\n  return (\n    <div className=\"panel panel-primary\">\n      <div className=\"panel-heading\">Panel</div>\n      <div className=\"panel-body\">\n        <table className=\"table table-condensed\">\n          <thead>\n            <tr>\n              <th>Direction</th>\n              <th>Amount</th>\n              <th>Kind</th>\n              <th>Strike</th>\n              <th>Expiry</th>\n              <th>Price</th>\n              <th>\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-success btn-xs\"\n                  onClick={addOption}\n                >\n                  Add Leg\n                </button>\n              </th>\n            </tr>\n          </thead>\n          <tbody>{renderContracts()}</tbody>\n        </table>\n        <div className=\"pull-right\">\n          <button\n            type=\"submit\"\n            className=\"btn btn-success btn-xs\"\n            onClick={visualize}\n          >\n            Generate Payoff\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Panel;\n","import {\n  UPDATE_PRICE,\n  UPDATE_INTEREST,\n  UPDATE_VOLATILITY,\n} from \"../actions/stockData\";\n\nconst initialState = {\n  currentPrice: \"1300\",\n  volatility: \"0.2\",\n  interest: \"0.05\",\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case UPDATE_PRICE:\n      return { ...state, currentPrice: action.price };\n    case UPDATE_VOLATILITY:\n      return { ...state, volatility: action.volatility };\n    case UPDATE_INTEREST:\n      return { ...state, interest: action.interest };\n  }\n\n  // Will be run initially\n  return state;\n};\n","import React, { useEffect, useState } from \"react\";\nimport Payoff from \"./components/Payoff\";\nimport \"./App.css\";\nimport StockData from \"./components/StockData\";\nimport Panel from \"./components/Panel\";\nimport * as util from \"./utility\";\nimport stockDataReducer from \"./store/reducers/stockData\";\nimport { createStore, combineReducers } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport Navigation from \"./components/Navigation\";\nimport moment from \"moment\";\n\n// const optionData = await axios.get(\n//   \"https://finnhub.io/api/v1/stock/option-chain?symbol=AAPL&token=\" +\n//     process.env.REACT_APP_API_KEY\n// );\n\nconst data1 = [\n  {\n    values: [\n      { x: 0, y: 0.5 },\n      { x: 1, y: 0 },\n      { x: 2, y: 2 },\n    ],\n    key: \"Sine Wave\",\n    color: \"#ff7f0e\",\n  },\n];\n\nconst data2 = [\n  {\n    values: [\n      { x: 0, y: 0.5 },\n      { x: 1, y: 3 },\n      { x: 2, y: 2 },\n    ],\n    key: \"Changed!\",\n    color: \"#ff7f0e\",\n  },\n];\n\nconst initialPortfolio = {\n  \"2020-08-12T19:58:01.033Z\": {\n    amount: 1,\n    contractName: \"2020-08-12T19:58:01.033Z\",\n    date: \"2020-08-12\",\n    direction: \"Buy\",\n    price: \"196.26\",\n    strike: \"1200\",\n    type: \"Call\",\n  },\n};\n\nconst rootReducer = combineReducers({\n  stockData: stockDataReducer,\n});\n\nconst store = createStore(rootReducer);\n\nconst App = () => {\n  const [portfolio, setPortfolio] = useState(initialPortfolio);\n  const [data, setData] = useState(data1);\n  const [errors, setErrors] = useState(null);\n  const [tickers, setTickers] = useState([{ value: \"Select a Ticker Symbol\" }]);\n\n  const fetchData = async () => {\n    // const data = await util.getTickerSymbols();\n    // data.shift({ value: \"Select a Ticker Symbol\" });\n    // const data2 = data.slice(data.length / 2);\n    // console.log(data2)\n    // console.log(data)\n    // setTickers(data);\n  };\n\n  const visualize = () => {\n    updateData(portfolio);\n  };\n\n  const updateData = (portfolio) => {\n    const strikes = [];\n    let maxStrike = 0;\n\n    const values = [];\n\n    // x = 0 will always be on the graph\n    strikes.push(0);\n\n    // Get the strikes to plot\n    for (let id in portfolio) {\n      const contract = portfolio[id];\n      const strike = +contract.strike;\n      strikes.push(strike);\n      if (strike > maxStrike) maxStrike = strike;\n    }\n\n    // Add x = max strike * 1.2 to the plot\n    strikes.push(Math.min(maxStrike * 1.2));\n\n    // For each strike, calculate the payoff and add it to values\n    for (let strike of strikes) {\n      let y = 0;\n      for (let id in portfolio) {\n        const contract = portfolio[id];\n        y += util.evaluatePayoffFunc(contract, strike);\n      }\n      values.push({ x: strike, y });\n    }\n\n    const data = [\n      {\n        values,\n        key: \"Test\",\n        color: \"blue\",\n      },\n    ];\n\n    setData(data);\n  };\n\n  useEffect(() => {\n    visualize();\n  }, [portfolio]);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const setErrs = (message) => {\n    setErrors(\n      <div class=\"alert alert-danger\" role=\"alert\">\n        {message}\n      </div>\n    );\n  };\n\n  console.log(portfolio);\n\n  return (\n    <Provider store={store}>\n      {/* <Navigation /> */}\n      <div className=\"container\">\n        <StockData />\n        <Panel\n          portfolio={portfolio}\n          setPortfolio={setPortfolio}\n          visualize={visualize}\n          currentPrice={100}\n        />\n        {errors}\n        <Payoff data={data} changeData={setData} />\n        {/* <button onClick={() => setErrs(\"This is an Error!\")}>Set Error</button> */}\n      </div>\n    </Provider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport moment from \"moment\";\n\nvar a = moment([2007, 0, 29]);\nvar b = moment([2008, 0, 28]);\nconst diff = a.diff(b, \"years\", true);\nconsole.log(diff);\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}