{"version":3,"sources":["components/Payoff.js","store/actions/portfolio.js","components/StockData.js","utility/options.js","utility/constants.js","utility/Option.js","utility/DS/ColorPicker.js","hooks/useUpdateEffect.js","components/Panel.js","context/liveData.js","components/Navigation/DropDownBtn.js","components/Navigation/Navigation.js","components/Search.js","components/Error/Error.js","components/SecurityInfo.js","components/Slider.js","components/StockAnyChart.js","components/PayoffHighChart.js","components/HighStock.js","App.js","store/reducers/portfolio.js","index.js"],"names":["Payoff","data","d3","remove","useEffect","myData","Ydomain","nv","newChart","lineChart","margin","left","useInteractiveGuideline","showLegend","showYAxis","showXAxis","xAxis","axisLabel","tickFormat","yAxis","forceY","datum","call","windowResize","update","drawChart","className","id","updateContract","contractName","property","value","type","updateStockData","StockData","liveMode","stockData","useSelector","state","portfolio","dispatch","useDispatch","Card","variant","CardHeader","title","subheader","moment","format","CardContent","InputLabel","htmlFor","TextField","label","placeholder","onChange","e","actions","target","currentPrice","volatility","evaluatePayoffFunc","option","price","cost","amount","cts","direction","Math","max","parseInt","strike","min","BlackScholes","optionType","S","X","T","r","v","d1","log","sqrt","d2","CND","exp","x","k","PI","BUY","SELL","CALL","PUT","CASH","stockDataInitialState","ticker","interest","updatePortfolioPrices","key","contract","getPrice","debitCredit","timeDiff","dateDiffInYears","date","round","num","n","res","toFixed","UNIXToDateString","UNIX_timestamp","a","Date","createDateNYearsFromNow","d","year","getFullYear","month","getMonth","day","getDate","console","c","futureDate","currentDate","diff","initialPortfolioId","initialPortfolio","getRelativeStrike","impliedVol","N","optionData","targetDate","Infinity","actualDate","expirationDate","dateDiff","abs","finalStrike","options","minDiffStrike","toUpperCase","getLongCondor","firstStrike","firstDate","firstPrice","secondStrike","secondDate","secondPrice","thirdStrike","thirdDate","thirdPrice","fourthStrike","fourthDate","fourthPrice","firstId","secondId","thirdId","fourthId","getShortCondor","getBullCallSpread","getBearPutSpread","getLongStraddle","getShortStraddle","getLongButterfly","getShortButterfly","Option","this","toISOString","ColorPicker","colors","index","result","length","useUpdateEffect","effect","dependencies","isInitialMount","useRef","current","useStyles","makeStyles","theme","formControl","spacing","minWidth","selectEmpty","marginTop","Contract","props","classes","useState","expirationDates","setExpirationDates","selectedDate","setSelectedDate","strikePrices","setStrikePrices","setPrice","map","item","apiContract","find","ask","bid","strikesAtDate","util","cashContract","TableRow","TableCell","FormControl","Select","labelId","MenuItem","InputLabelProps","shrink","isNaN","textField","style","verticalAlign","Typography","Button","color","button","startIcon","onClick","contractId","Panel","premium","debitcredit","calculateTotal","TableContainer","Table","aria-label","TableHead","newContract","TableBody","push","renderContracts","liveDataContext","React","createContext","setLiveMode","DropDownBtn","open","setOpen","anchorRef","handleClose","event","newPortfolio","contains","handleListKeyDown","preventDefault","prevOpen","focus","ref","aria-controls","undefined","aria-haspopup","Popper","anchorEl","role","transition","disablePortal","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","autoFocusItem","onKeyDown","root","flexGrow","menuButton","marginRight","navbar","marginBottom","position","zIndex","MenuAppBar","setPortfolio","changeTheme","useContext","AppBar","Toolbar","FormGroup","FormControlLabel","control","Switch","checked","prev","IconButton","href","height","widht","Search","searchFunc","inputValue","setInputValue","Grid","md","Autocomplete","symbols","getOptionLabel","displaySymbol","description","filterOptions","query","filter","o","includes","renderInput","params","noOptionsText","Error","reason","removeFunc","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","message","children","action","Fragment","size","fontSize","SecurityInfo","Body","width","input","slider","InputSlider","setValue","gutterBottom","container","alignItems","xs","Slider","newValue","aria-labelledby","StockAnyChart","newData","forEach","pnt","stockDataTable","anychart","table","addData","chart","plot","area","mapAs","name","scroller","selectRange","instance","PayoffHighChart","highcharts","Highcharts","App","mockData","mockOptions","rangeSelector","selected","text","labels","align","lineWidth","resize","enabled","top","offset","tooltip","split","series","dataGrouping","units","columnData","i","HighStock","constructorType","payoff","setData","errors","setErrors","stockErrors","setStockErrors","setOptionData","minX","setMinX","maxX","setMaxX","stockChartData","setStockChartData","viewHighChart","setViewHighChart","viewHighStock","setViewHighStock","hcData","setHcData","daysToExpiration","setDaysToExpiration","setErrs","useCallback","setStockErrs","updateData","Object","keys","strikes","maxStrike","minStrike","values","theoretical","average","change","floor","sort","b","getColor","disabled","minProfit","maxProfit","profitSum","theoreticalPL","profitAtStrike","blackScholesValue","y","strategyData","strategyTheoretical","seriesInfo","visible","point","fetchOptionData","axios","get","process","lastTradePrice","code","fetchStockData","unix","t","h","l","updateDaysToExpiration","days","newDate","dayObject","valueOf","setDate","Provider","Container","visualize","val","onBlur","initialState","resetPortfolio","removeContract","addContract","updatePrices","newStockData","updateAllContracts","rootReducer","combineReducers","store","createStore","Index","darkState","setDarkState","palletType","createMuiTheme","palette","StrictMode","ThemeProvider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dae9a93a.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport * as nv from \"nvd3\";\n\nconst Payoff = ({ data }) => {\n  // Clear the Charts\n  d3.selectAll(\"svg > *\").remove();\n\n  const drawChart = ({ data: myData, Ydomain }) => {\n    /*These lines are all chart setup.  Pick and choose which chart features you want to utilize. */\n    nv.addGraph(() => {\n      const newChart = nv.models\n        .lineChart()\n        .margin({ left: 100 }) //Adjust chart margins to give the x-axis some breathing room.\n        .useInteractiveGuideline(false) //We want nice looking tooltips and a guideline!\n        // .duration(1500) //how fast do you want the lines to transition? Was removed, caused wrong data points positions after doing a transition bug https://github.com/novus/nvd3/issues/2018\n        .showLegend(true) //Show the legend, allowing users to turn on/off line series.\n        .showYAxis(true) //Show the y-axis\n        .showXAxis(true); //Show the x-axis\n\n      newChart.xAxis //Chart x-axis settings\n        .axisLabel(\"Price ($)\")\n        .tickFormat(d3.format(\",.2f\"));\n\n      newChart.yAxis //Chart y-axis settings\n        .axisLabel(\"Profit ($)\")\n        .tickFormat(d3.format(\",.2f\"));\n\n      newChart.forceY(Ydomain);\n\n      d3.select(\"#chart svg\") //Select the <svg> element you want to render the chart in.\n        .datum(myData) //Populate the <svg> element with chart data...\n        .call(newChart); //Finally, render the chart!\n\n      // Update the chart when window resizes.\n      nv.utils.windowResize(newChart.update);\n\n      return newChart;\n    });\n  };\n\n  // UseEffect with no deps so that a chart is always rendered\n  useEffect(() => {\n    data && drawChart(data);\n  });\n\n  // console.log(\"Payoff Rendered\");\n\n  return (\n    <>\n      <div className=\"panel-body\">\n        <div id=\"chart\">\n          <svg></svg>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Payoff;\n","export const ADD_CONTRACT = \"ADD_CONTRACT\";\nexport const REMOVE_CONTRACT = \"REMOVE_CONTRACT\";\nexport const RESET_PORTFOLIO = \"RESET_PORTFOLIO\";\nexport const SET_PORTFOLIO = \"SET_PORTFOLIO\";\nexport const UPDATE_PRICES = \"UPDATE_PRICES\";\nexport const UPDATE_CONTRACT = \"UPDATE_CONTRACT\";\nexport const UPDATE_ALL_CONTRACTS = \"UPDATE_ALL_CONTRACTS\";\n\nexport const addContract = (newContract) => {\n  return {\n    type: ADD_CONTRACT,\n    newContract,\n  };\n};\n\nexport const updateContract = (contractName, property, value) => {\n  return {\n    type: UPDATE_CONTRACT,\n    property,\n    value,\n    contractName,\n  };\n};\n\nexport const updateAllContracts = (property, value) => {\n  return {\n    type: UPDATE_ALL_CONTRACTS,\n    property,\n    value,\n  };\n};\n\nexport const removeContract = (contractId) => {\n  return {\n    type: REMOVE_CONTRACT,\n    contractId,\n  };\n};\n\nexport const resetPortfolio = () => {\n  return {\n    type: RESET_PORTFOLIO,\n  };\n};\n\nexport const setPortfolio = (newPortfolio) => {\n  return {\n    type: SET_PORTFOLIO,\n    newPortfolio,\n  };\n};\n\nexport const updatePrices = () => {\n  return {\n    type: UPDATE_PRICES,\n  };\n};\n\n// Stock Data\nexport const UPDATE_PRICE = \"UPDATE_PRICE\";\nexport const UPDATE_VOLATILITY = \"UPDATE_VOLATILITY\";\nexport const UPDATE_INTEREST = \"UPDATE_INTEREST\";\nexport const UPDATE_TICKER = \"UPDATE_TICKER\";\nexport const RESET_DATA = \"RESET_DATA\";\nexport const UPDATE_STOCK_DATA = \"UPDATE_STOCK_DATA\";\n\nexport const updateStockData = (property, value) => {\n  return {\n    type: UPDATE_STOCK_DATA,\n    property,\n    value,\n  };\n};\n\nexport const resetData = () => {\n  return {\n    type: RESET_DATA,\n  };\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as actions from \"../store/actions/portfolio\";\nimport {\n  Card,\n  CardContent,\n  TextField,\n  InputLabel,\n  CardHeader,\n} from \"@material-ui/core\";\nimport moment from \"moment\";\n\nconst StockData = ({ liveMode }) => {\n  const { stockData } = useSelector((state) => state.portfolio);\n  const dispatch = useDispatch();\n\n  return (\n    <>\n      <Card variant=\"outlined\">\n        <CardHeader\n          title=\"Stock Data\"\n          subheader={moment().format(\"MM-DD-YYYY\")}\n        ></CardHeader>\n        <CardContent>\n          <InputLabel htmlFor=\"current-price\">\n            Current Stock Price ($)\n          </InputLabel>\n          <TextField\n            id=\"current-price\"\n            label=\"Current Price\"\n            variant=\"filled\"\n            type=\"number\"\n            placeholder=\"Current Price\"\n            onChange={(e) => {\n              dispatch(actions.updateStockData(\"currentPrice\", e.target.value));\n            }}\n            value={stockData.currentPrice}\n          ></TextField>\n          <InputLabel htmlFor=\"current-price\">Volatility (%)</InputLabel>\n          <TextField\n            id=\"outlined-basic\"\n            label=\"Volatility\"\n            variant=\"filled\"\n            type=\"number\"\n            placeholder=\"Volatility\"\n            onChange={(e) =>\n              dispatch(actions.updateStockData(\"volatility\", e.target.value))\n            }\n            value={stockData.volatility}\n          ></TextField>\n          <InputLabel htmlFor=\"current-price\">Interest Rate(%)</InputLabel>\n          <TextField\n            id=\"outlined-basic\"\n            label=\"Interest\"\n            variant=\"filled\"\n            type=\"number\"\n            placeholder=\"Interest\"\n            onChange={(e) =>\n              dispatch(actions.updateStockData(\"interest\", e.target.value))\n            }\n            value={stockData.volatility}\n          ></TextField>\n        </CardContent>\n      </Card>\n    </>\n  );\n};\n\nexport default StockData;\n","import * as cts from \"./constants\";\nimport Option from \"./Option\";\n\n/**\n * Evaluates a Payoff Function\n *\n * @param {Option} option An option Object\n * @param {Number} price A given stock price\n * @param {Object} stockData StockData object containing the stock currentPrice\n * @returns {Number} The value of the option/stock\n */\n\n// Takes in option object and evaluates the payoff given the input price\nexport const evaluatePayoffFunc = (option, price, stockData) => {\n  const cost = option.price * option.amount;\n  if (option.type === cts.CALL) {\n    // A call Option\n    if (option.direction === cts.BUY) {\n      // Long Call\n      return (\n        Math.max(price - parseInt(option.strike), 0) * option.amount - cost\n      );\n    }\n    // Short Call\n    return Math.min(0, option.strike - price) * option.amount + cost;\n  } else if (option.type === cts.PUT) {\n    // A Put Option\n    if (option.direction === cts.BUY) {\n      // Long Put\n      return (\n        Math.max(parseInt(option.strike) - price, 0) * option.amount - cost\n      );\n    }\n    // Short Put\n    return Math.min(0, price - option.strike) * option.amount + cost;\n  } else if (option.type === cts.CASH) {\n    // Stock\n    if (option.direction === cts.BUY) {\n      // Long Stock\n      return (price - stockData.currentPrice) * option.amount;\n    }\n    // Short Stock\n    return (stockData.currentPrice - price) * option.amount;\n  }\n};\n\n/**\n * Calculates Stock Price Based On BS model\n *\n * @param {String} optionType The type of option - cts.CALL or cts.PUT\n * @param {Number} S Current Stock price\n * @param {Number} X Exercise Price\n * @param {Number} T Time remaining to the expiration Date (in years)\n * @param {Number} r Short-term risk free interest rate\n * @param {Number} v Standard deviation of stock price (implied volatility)\n * @returns {Number} The Price of the option\n */\n\nexport function BlackScholes(optionType, S, X, T, r, v) {\n  // Unit adjustments\n  v = v / 100;\n  r = r / 100;\n  var d1 = (Math.log(S / X) + (r + (v * v) / 2) * T) / (v * Math.sqrt(T));\n  var d2 = d1 - v * Math.sqrt(T);\n  if (optionType === cts.CALL) {\n    return cts.round(S * CND(d1) - X * Math.exp(-r * T) * CND(d2));\n  } else {\n    return cts.round(X * Math.exp(-r * T) * CND(-d2) - S * CND(-d1));\n  }\n}\n\n/* The cumulative Normal distribution function: */\nfunction CND(x) {\n  if (x < 0) {\n    return 1 - CND(-x);\n  } else {\n    let k = 1 / (1 + 0.2316419 * x);\n    return (\n      1 -\n      (Math.exp((-x * x) / 2) / Math.sqrt(2 * Math.PI)) *\n        k *\n        (0.31938153 +\n          k *\n            (-0.356563782 +\n              k * (1.781477937 + k * (-1.821255978 + k * 1.330274429))))\n    );\n  }\n}\n","import moment from \"moment\";\nimport { BlackScholes } from \"./options\";\n\nexport const BUY = \"Buy\";\nexport const SELL = \"Sell\";\nexport const CALL = \"Call\";\nexport const PUT = \"Put\";\nexport const CASH = \"Cash\";\n\n// Some Error Message variables\nexport const STOCK_NO_OPTIONS = \"This Stock Has No Available Options\";\nexport const STOCK_ERR_FETCH = \"Unable To Fetch Stock Data, Try again Later\";\n\n// Initial Stock Data State\nexport const stockDataInitialState = {\n  ticker: \"Theoretical\",\n  currentPrice: 100,\n  volatility: 30,\n  interest: 2,\n};\n\nexport const updatePortfolioPrices = (portfolio, stockData) => {\n  for (let key in portfolio) {\n    const contract = portfolio[key];\n    if (contract.type === CASH) {\n      contract.price = stockData.currentPrice;\n    } else {\n      contract.price = getPrice(contract, stockData);\n    }\n    contract.debitCredit =\n      contract.direction === SELL ? contract.price : -contract.price;\n  }\n};\n\nconst getPrice = (contract, stockData) => {\n  const timeDiff = dateDiffInYears(contract.date);\n  return round(\n    BlackScholes(\n      contract.type,\n      stockData.currentPrice,\n      contract.strike,\n      timeDiff,\n      stockData.interest,\n      stockData.volatility\n    )\n  );\n};\n\n/**\n * Round a number to a given number of digits\n *\n * @param {Number | String} num The number to round\n * @param {Number | null} n The number of significant digits, defaults to 2\n * @returns {Number} The rounded number\n */\n\n// Round a Number\nexport const round = (num, n = 2) => {\n  // If it is a string convert it to num\n  if (typeof num === \"string\") {\n    num = +num;\n  }\n  let res = num.toFixed(n);\n  return +res;\n};\n\n/**\n * Converts a UNIX Timestamp to Date String in the format: YYYY-MM-DD\n *\n * @param {Number} UNIX_timestamp A unix timestamp\n * @returns {String} Date String in the format: YYYY-MM-DD\n */\n\nexport const UNIXToDateString = (UNIX_timestamp) => {\n  const a = new Date(UNIX_timestamp * 1000);\n  return moment(a).format(\"YYYY-MM-DD\");\n};\n\n/**\n * Adds a number of days to a given date object\n *\n * @param {Date} dayObject A Date Object\n * @param {Number} days The number of days to be added\n * @returns {Date} Date Object after adding the days\n */\n\n// Function that adds num days to a date object\nexport const addDays = (dayObject, days) => {\n  var date = new Date(dayObject.valueOf());\n  date.setDate(date.getDate() + days);\n  return date;\n};\n\n/**\n * Creates a Date String of Format YYYY-MM-DD after N years from the present\n *\n * @param {Number} n The number of years to be added\n * @returns {Date} Date Object after adding the years\n */\n\n// Create a Date 1 year from now, used as default date on contract\nconst createDateNYearsFromNow = (n) => {\n  var d = new Date();\n  var year = d.getFullYear();\n  var month = d.getMonth();\n  var day = d.getDate();\n  console.log(year);\n  var c = new Date(year + n, month, day);\n  return moment(c).format(\"YYYY-MM-DD\");\n};\n\n/**\n * Gets the difference between two dates in years\n *\n * @param {Date} futureDate The Future Date\n * @param {Date} currentDate The Past Date, defaults to the present Date\n * @returns {Date} Date Object after adding the years\n */\n\nexport const dateDiffInYears = (futureDate, currentDate = new Date()) => {\n  return -moment(currentDate).diff(futureDate, \"years\", true);\n};\n\n// Create the initialPortfolio\n\n// Date used in initial portfolio\nexport const date = createDateNYearsFromNow(1);\n\nconst initialPortfolioId = {\n  amount: 1,\n  contractName: \"initialPortfolioId\",\n  date,\n  direction: BUY,\n  strike: 100,\n  type: CALL,\n};\n\nconst price = getPrice(initialPortfolioId, stockDataInitialState);\n\ninitialPortfolioId.price = price;\n\ninitialPortfolioId.debitCredit = price;\n\n// The initial Theoretical Option Portfolio\nexport const initialPortfolio = {\n  initialPortfolioId,\n};\n\n/* Function that takes in currentPrice, impliedVolatility and a number representing\nThe desired deviation from the current price. Used when calculating strikes on option\nstrategies */\nexport const getRelativeStrike = (\n  currentPrice,\n  impliedVol,\n  N,\n  optionData,\n  type,\n  interest\n) => {\n  let strike =\n    round(currentPrice) + round(currentPrice) * round(impliedVol / 100) * N;\n\n  if (!optionData) {\n    const dateDiff = dateDiffInYears(date);\n    const price = BlackScholes(\n      type,\n      currentPrice,\n      strike,\n      dateDiff,\n      interest,\n      impliedVol\n    );\n    return { strike, date, price };\n  }\n  // Adjust According to OptionData\n\n  /*\n    Steps:\n    1. Find Find a date that is the closest to one year from now given optionData\n    2. Given the date, find a strike that is closest to the relative strike that \n    was calculated previously.\n  */\n\n  // Find a date that is the closest to one year from now given optionData\n  const targetDate = createDateNYearsFromNow(1);\n  let min = Infinity;\n  let actualDate = null;\n\n  for (let key in optionData.data) {\n    const { expirationDate } = optionData.data[key];\n    // Take Math abs so that we get a number in the future\n    const dateDiff = Math.abs(dateDiffInYears(expirationDate, targetDate));\n    if (dateDiff < min) {\n      min = dateDiff;\n      actualDate = expirationDate;\n    }\n  }\n\n  let finalStrike = strike;\n  // For each of the option contracts with the given exp Date find the one closest\n  // To the calculated strike price\n  for (let key in optionData.data) {\n    const { options, expirationDate } = optionData.data[key];\n    if (expirationDate === actualDate) {\n      let minDiffStrike = Infinity;\n      for (let option of options[type.toUpperCase()]) {\n        if (Math.abs(option.strike - strike) < minDiffStrike) {\n          minDiffStrike = Math.abs(option.strike - strike);\n          finalStrike = option.strike;\n        }\n      }\n    }\n  }\n\n  const dateDiff = dateDiffInYears(actualDate);\n  const price = round(\n    BlackScholes(\n      type,\n      currentPrice,\n      finalStrike,\n      dateDiff,\n      interest,\n      impliedVol\n    )\n  );\n\n  return { strike: finalStrike, date: actualDate, price };\n};\n\n// Return a long condor strategy option portfolio, given the currentprice, volatility\n// and live option data.\nexport const getLongCondor = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    -1,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    -0.5,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: thirdStrike,\n    date: thirdDate,\n    price: thirdPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.5,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: fourthStrike,\n    date: fourthDate,\n    price: fourthPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    1,\n    optionData,\n    CALL,\n    interest\n  );\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: BUY,\n      price: firstPrice,\n      strike: firstStrike,\n      type: CALL,\n    },\n    secondId: {\n      amount: 1,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: SELL,\n      price: secondPrice,\n      strike: secondStrike,\n      type: CALL,\n    },\n    thirdId: {\n      amount: 1,\n      contractName: \"thirdId\",\n      date: thirdDate,\n      direction: SELL,\n      price: thirdPrice,\n      strike: thirdStrike,\n      type: CALL,\n    },\n    fourthId: {\n      amount: 1,\n      contractName: \"fourthId\",\n      date: fourthDate,\n      direction: BUY,\n      price: fourthPrice,\n      strike: fourthStrike,\n      type: CALL,\n    },\n  };\n};\n\nexport const getShortCondor = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.5,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    1,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: thirdStrike,\n    date: thirdDate,\n    price: thirdPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    -0.5,\n    optionData,\n    PUT,\n    interest\n  );\n\n  const {\n    strike: fourthStrike,\n    date: fourthDate,\n    price: fourthPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    -1,\n    optionData,\n    PUT,\n    interest\n  );\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: BUY,\n      price: firstPrice,\n      strike: firstStrike,\n      type: CALL,\n    },\n    secondId: {\n      amount: 1,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: SELL,\n      price: secondPrice,\n      strike: secondStrike,\n      type: CALL,\n    },\n    thirdId: {\n      amount: 1,\n      contractName: \"thirdId\",\n      date: thirdDate,\n      direction: BUY,\n      price: thirdPrice,\n      strike: thirdStrike,\n      type: PUT,\n    },\n    fourthId: {\n      amount: 1,\n      contractName: \"fourthId\",\n      date: fourthDate,\n      direction: SELL,\n      price: fourthPrice,\n      strike: fourthStrike,\n      type: PUT,\n    },\n  };\n};\n\nexport const getBullCallSpread = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.5,\n    optionData,\n    CALL,\n    interest\n  );\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: BUY,\n      price: firstPrice,\n      strike: firstStrike,\n      type: CALL,\n    },\n    secondId: {\n      amount: 1,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: SELL,\n      price: secondPrice,\n      strike: secondStrike,\n      type: CALL,\n    },\n  };\n};\n\nexport const getBearPutSpread = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(currentPrice, impliedVol, 0, optionData, PUT, interest);\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    -0.5,\n    optionData,\n    PUT,\n    interest\n  );\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: BUY,\n      price: firstPrice,\n      strike: firstStrike,\n      type: PUT,\n    },\n    secondId: {\n      amount: 1,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: SELL,\n      price: secondPrice,\n      strike: secondStrike,\n      type: PUT,\n    },\n  };\n};\n\nexport const getLongStraddle = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(currentPrice, impliedVol, 0, optionData, PUT, interest);\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: BUY,\n      price: firstPrice,\n      strike: firstStrike,\n      type: CALL,\n    },\n    secondId: {\n      amount: 1,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: BUY,\n      price: secondPrice,\n      strike: secondStrike,\n      type: PUT,\n    },\n  };\n};\n\nexport const getShortStraddle = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(currentPrice, impliedVol, 0, optionData, PUT, interest);\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: SELL,\n      price: firstPrice,\n      strike: firstStrike,\n      type: CALL,\n    },\n    secondId: {\n      amount: 1,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: SELL,\n      price: secondPrice,\n      strike: secondStrike,\n      type: PUT,\n    },\n  };\n};\n\nexport const getLongStradde = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.5,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    -0.5,\n    optionData,\n    PUT,\n    interest\n  );\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: BUY,\n      price: firstPrice,\n      strike: firstStrike,\n      type: CALL,\n    },\n    secondId: {\n      amount: 1,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: BUY,\n      price: secondPrice,\n      strike: secondStrike,\n      type: PUT,\n    },\n  };\n};\n\nexport const getShortStrangle = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.5,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    -0.5,\n    optionData,\n    PUT,\n    interest\n  );\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: SELL,\n      price: firstPrice,\n      strike: firstStrike,\n      type: CALL,\n    },\n    secondId: {\n      amount: 1,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: SELL,\n      price: secondPrice,\n      strike: secondStrike,\n      type: PUT,\n    },\n  };\n};\n\nexport const getLongButterfly = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    -0.5,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.0,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: thirdStrike,\n    date: thirdDate,\n    price: thirdPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.5,\n    optionData,\n    CALL,\n    interest\n  );\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: BUY,\n      price: firstPrice,\n      strike: firstStrike,\n      type: CALL,\n    },\n    secondId: {\n      amount: 2,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: SELL,\n      price: secondPrice,\n      strike: secondStrike,\n      type: CALL,\n    },\n    thirdId: {\n      amount: 1,\n      contractName: \"thirdId\",\n      date: thirdDate,\n      direction: BUY,\n      price: thirdPrice,\n      strike: thirdStrike,\n      type: CALL,\n    },\n  };\n};\n\nexport const getShortButterfly = (\n  currentPrice,\n  impliedVol,\n  optionData,\n  interest\n) => {\n  const {\n    strike: firstStrike,\n    date: firstDate,\n    price: firstPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.0,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: secondStrike,\n    date: secondDate,\n    price: secondPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.5,\n    optionData,\n    CALL,\n    interest\n  );\n\n  const {\n    strike: thirdStrike,\n    date: thirdDate,\n    price: thirdPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    0.0,\n    optionData,\n    PUT,\n    interest\n  );\n\n  const {\n    strike: fourthStrike,\n    date: fourthDate,\n    price: fourthPrice,\n  } = getRelativeStrike(\n    currentPrice,\n    impliedVol,\n    -0.5,\n    optionData,\n    PUT,\n    interest\n  );\n\n  return {\n    firstId: {\n      amount: 1,\n      contractName: \"firstId\",\n      date: firstDate,\n      direction: BUY,\n      price: firstPrice,\n      strike: firstStrike,\n      type: CALL,\n    },\n    secondId: {\n      amount: 1,\n      contractName: \"secondId\",\n      date: secondDate,\n      direction: SELL,\n      price: secondPrice,\n      strike: secondStrike,\n      type: CALL,\n    },\n    thirdId: {\n      amount: 1,\n      contractName: \"thirdId\",\n      date: thirdDate,\n      direction: BUY,\n      price: thirdPrice,\n      strike: thirdStrike,\n      type: PUT,\n    },\n    fourthId: {\n      amount: 1,\n      contractName: \"fourthId\",\n      date: fourthDate,\n      direction: SELL,\n      price: fourthPrice,\n      strike: fourthStrike,\n      type: PUT,\n    },\n  };\n};\n","import * as cts from \"./constants\";\n\n// Option definition class\nexport default class Option {\n  constructor(contractName) {\n    this.contractName = new Date().toISOString()\n    this.strike = 100;\n    this.date = cts.date;\n    this.direction = cts.BUY;\n    this.type = cts.CALL;\n    this.amount = 1;\n    this.debitCredit = 0;\n  }\n}\n","// Color Picker Structure to help select color on graph\nexport default class ColorPicker {\n    // Available colors, more can be added\n    colors = [\n        \"blue\",\n        \"red\",\n        \"yellow\",\n        \"purple\",\n        \"orange\",\n        \"black\",\n    ]\n\n    constructor() {\n        this.index = 0;\n    }\n\n    // Get the Next Color\n    getColor(){\n        const result =  this.colors[this.index];\n        // Adjust the index;\n        if(this.index >= this.colors.length){\n            // We have reached the end reset to zero\n            this.index = 0;\n        }else{\n            // Not at end just add one to index\n            this.index++;\n        }\n        return result;\n    }\n}","/**\n * A custom useEffect hook that only triggers on updates, not on initial mount\n * Idea stolen from: https://stackoverflow.com/a/55075818/1526448\n * @param {Function} effect\n * @param {Array<any>} dependencies\n */\n\nimport { useEffect, useRef } from \"react\";\n\nexport default function useUpdateEffect(effect, dependencies = []) {\n  const isInitialMount = useRef(true);\n\n  useEffect(() => {\n    if (isInitialMount.current) {\n      isInitialMount.current = false;\n    } else {\n      effect();\n    }\n  }, dependencies);\n}\n","import React, { useEffect, useState } from \"react\";\nimport Option from \"../utility/Option\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as util from \"../utility\";\nimport useUpdateEffect from \"../hooks/useUpdateEffect\";\nimport * as actions from \"../store/actions/portfolio\";\nimport { Card, CardHeader, CardContent, Typography } from \"@material-ui/core\";\nimport { Table, TableCell, TableContainer } from \"@material-ui/core\";\nimport { TableRow, TableHead, makeStyles } from \"@material-ui/core\";\nimport { FormControl, InputLabel, Select } from \"@material-ui/core\";\nimport { MenuItem, TextField, TableBody, Button } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\n// TODO: make contract component lean by outsorcing logic to redux\nconst Contract = (props) => {\n  const { data, optionData } = props;\n  const classes = useStyles();\n\n  /*\n   If optionData is defined then the strike prices must adjust to the\n   Expiration date\n   */\n\n  // Default state values are when a strategy is selected in live mode\n  const [expirationDates, setExpirationDates] = useState([]);\n  const [selectedDate, setSelectedDate] = useState(data.date);\n  const [strikePrices, setStrikePrices] = useState([[data.strike]]);\n\n  const dispatch = useDispatch();\n\n  // Stock data from redux\n  const { stockData } = useSelector((state) => state.portfolio);\n\n  // Calculate the price based on Black-Scholes model\n  const [price, setPrice] = useState(data.price);\n\n  // Set expiration Dates when component mounts\n  useEffect(() => {\n    if (optionData) {\n      const expirationDates = optionData.data.map(\n        (item) => item.expirationDate\n      );\n      setExpirationDates(expirationDates);\n    }\n  }, []);\n\n  // Update strike and price at change\n  useUpdateEffect(() => {\n    if (optionData) {\n      // Find the element with same date\n      const apiContract = optionData.data.find(\n        (item) => item.expirationDate === selectedDate\n      );\n\n      if (!apiContract) return;\n\n      // Find the type of option this is\n      const type = data.type.toUpperCase();\n\n      // Extract the contracts given the date\n      const contractsAtDate = apiContract.options[type];\n\n      // Find the contract with the selected Strike\n      const contract = contractsAtDate.find(\n        (item) => +item.strike === +data.strike\n      );\n\n      // Set the price depending if we are short or long\n      if (data.direction === \"Buy\") {\n        dispatch(\n          actions.updateContract(data.contractName, \"price\", contract.ask)\n        );\n      } else {\n        dispatch(\n          actions.updateContract(data.contractName, \"price\", contract.bid)\n        );\n      }\n    }\n  }, [data.strike, setPrice]);\n\n  useUpdateEffect(() => {\n    if (optionData) {\n      // Find the element with same date\n      const apiContract = optionData.data.find(\n        (item) => item.expirationDate === selectedDate\n      );\n\n      // If none found return\n      if (!apiContract) return;\n\n      // Find the type of option this is\n      const type = data.type.toUpperCase();\n\n      // Extract the contracts given the date\n      const contractsAtDate = apiContract.options[type];\n\n      // Make an array of strikes at the current date\n      const strikesAtDate = contractsAtDate.map((item) => item.strike);\n\n      // Update strikeprices\n      setStrikePrices(strikesAtDate);\n    }\n  }, [selectedDate]);\n\n  // Update type\n  useUpdateEffect(() => {\n    // If we just changed to cash\n    if (data.type === util.CASH) {\n      // Set Debit/Credit equal to the stock price\n      setPrice(stockData.currentPrice);\n    }\n  }, [data.type]);\n\n  const cashContract = data.type === util.CASH;\n\n  return (\n    <TableRow>\n      {/* Direction: Fully Using Redux */}\n      <TableCell>\n        <FormControl variant=\"outlined\" className={classes.formControl}>\n          <InputLabel id=\"demo-simple-select-outlined-label\">\n            Direction\n          </InputLabel>\n          <Select\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            value={data.direction}\n            onChange={(e) =>\n              dispatch(\n                actions.updateContract(\n                  data.contractName,\n                  \"direction\",\n                  e.target.value\n                )\n              )\n            }\n            label=\"Direction\"\n          >\n            <MenuItem value={util.BUY}>Buy</MenuItem>\n            <MenuItem value={util.SELL}>Sell</MenuItem>\n          </Select>\n        </FormControl>\n      </TableCell>\n      {/* Amount: Fully Using Redux */}\n      <TableCell>\n        <TextField\n          id=\"outlined-number\"\n          label=\"Amount\"\n          type=\"number\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n          onChange={(e) =>\n            dispatch(\n              actions.updateContract(\n                data.contractName,\n                \"amount\",\n                e.target.value\n              )\n            )\n          }\n          value={data.amount}\n          variant=\"outlined\"\n        />\n      </TableCell>\n      {/* Kind: Fully Using Redux*/}\n      <TableCell>\n        <FormControl variant=\"outlined\" className={classes.formControl}>\n          <InputLabel id=\"demo-simple-select-outlined-label\">Kind</InputLabel>\n          <Select\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            value={data.type}\n            onChange={(e) =>\n              dispatch(\n                actions.updateContract(\n                  data.contractName,\n                  \"type\",\n                  e.target.value\n                )\n              )\n            }\n            label=\"Kind\"\n          >\n            <MenuItem value={util.CALL}>Call</MenuItem>\n            <MenuItem value={util.PUT}>Put</MenuItem>\n            <MenuItem value={util.CASH}>Cash</MenuItem>\n          </Select>\n        </FormControl>\n      </TableCell>\n      {/* Strike Price: TODO UPDATE REDUX */}\n      <TableCell>\n        {!cashContract ? (\n          optionData ? (\n            <FormControl variant=\"outlined\" className={classes.formControl}>\n              <InputLabel id=\"demo-simple-select-outlined-label\">\n                Strike\n              </InputLabel>\n              <Select\n                labelId=\"demo-simple-select-outlined-label\"\n                id=\"demo-simple-select-outlined\"\n                value={data.strike}\n                onChange={(e) =>\n                  dispatch(\n                    actions.updateContract(\n                      data.contractName,\n                      \"strike\",\n                      e.target.value\n                    )\n                  )\n                }\n                label=\"Kind\"\n              >\n                {strikePrices.map((price) => (\n                  <MenuItem value={price}>\n                    {isNaN(price) ? null : price}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          ) : (\n            <TextField\n              id=\"outlined-number\"\n              label=\"Strike\"\n              type=\"number\"\n              InputLabelProps={{\n                shrink: true,\n              }}\n              onChange={(e) =>\n                dispatch(\n                  actions.updateContract(\n                    data.contractName,\n                    \"strike\",\n                    e.target.value\n                  )\n                )\n              }\n              value={data.strike}\n              variant=\"outlined\"\n            />\n          )\n        ) : null}\n      </TableCell>\n      {/* Expiry Date */}\n      <TableCell>\n        {!cashContract &&\n          (!optionData ? (\n            <TextField\n              id=\"date\"\n              label=\"Expiry\"\n              type=\"date\"\n              value={data.date}\n              className={classes.textField}\n              onChange={(e) =>\n                dispatch(\n                  actions.updateContract(\n                    data.contractName,\n                    \"date\",\n                    e.target.value\n                  )\n                )\n              }\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          ) : (\n            <FormControl variant=\"outlined\" className={classes.formControl}>\n              <InputLabel id=\"demo-simple-select-outlined-label\">\n                Expiry\n              </InputLabel>\n              <Select\n                labelId=\"demo-simple-select-outlined-label\"\n                id=\"demo-simple-select-outlined\"\n                onChange={(e) => setSelectedDate(e.target.value)}\n                value={selectedDate}\n                label=\"Expiry\"\n              >\n                {expirationDates.map((date) => (\n                  <MenuItem value={date}>{date}</MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          ))}\n      </TableCell>\n      {/* Premium/Price */}\n      <TableCell style={{ verticalAlign: \"middle\" }}>\n        <Typography variant=\"h6\">\n          <b>{data.price * data.amount}</b>\n        </Typography>\n      </TableCell>\n      {/* Debit/Credit: TODO add as property in Option Obj, updated in */}\n      <TableCell style={{ verticalAlign: \"middle\" }}>\n        <Typography variant=\"h6\">\n          <b>{data.debitCredit * data.amount} </b>\n        </Typography>\n      </TableCell>\n      {/* Remove Button */}\n      <TableCell style={{ verticalAlign: \"middle\" }}>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          className={classes.button}\n          startIcon={<DeleteIcon />}\n          onClick={() => dispatch(actions.removeContract(data.contractName))}\n        >\n          Remove\n        </Button>\n      </TableCell>\n    </TableRow>\n  );\n};\n\nconst Panel = (props) => {\n  const { optionData } = props; // removed portfolio\n  const { portfolio, stockData } = useSelector((state) => state.portfolio);\n  const dispatch = useDispatch();\n\n  const renderContracts = () => {\n    const result = [];\n    for (let id in portfolio) {\n      result.push(\n        <Contract optionData={optionData} data={portfolio[id]} key={id} />\n      );\n    }\n    return result;\n  };\n\n  const calculateTotal = () => {\n    let premium = 0;\n    let debitcredit = 0;\n    let amount = 0;\n\n    for (let key in portfolio) {\n      const contract = portfolio[key];\n      premium += +contract.price * +contract.amount;\n      const debitToAdd =\n        contract.direction === util.SELL ? +contract.price : -+contract.price;\n      debitcredit += debitToAdd * +contract.amount;\n      amount += +contract.amount;\n    }\n    return {\n      premium: premium.toFixed(2),\n      debitcredit: debitcredit.toFixed(2),\n      amount,\n    };\n  };\n\n  const { premium, debitcredit, amount } = calculateTotal();\n\n  return (\n    <Card variant=\"outlined\">\n      <CardContent>\n        <TableContainer>\n          <Table aria-label=\"simple table\">\n            <TableHead>\n              <TableRow>\n                <TableCell>\n                  <Typography variant=\"h5\">Direction</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"h5\">Amount</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"h5\">Kind</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"h5\">Strike</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"h5\">Expiry</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"h5\">Premium</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"h5\">Debit/Credit</Typography>\n                </TableCell>\n                <TableCell>\n                  <Button\n                    type=\"submit\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={() =>\n                      dispatch(actions.addContract(new Option(), stockData))\n                    }\n                  >\n                    Add Leg\n                  </Button>\n                </TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {renderContracts()}\n              <TableRow>\n                <TableCell>\n                  <Typography variant=\"h6\">Total</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"h6\">{amount}</Typography>\n                </TableCell>\n                <TableCell></TableCell>\n                <TableCell></TableCell>\n                <TableCell></TableCell>\n                <TableCell>\n                  <Typography variant=\"h6\">{premium}</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"h6\">{debitcredit}</Typography>\n                </TableCell>\n                <TableCell>\n                  <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    startIcon={<DeleteIcon />}\n                    onClick={() => dispatch(actions.resetPortfolio())}\n                  >\n                    Remove All\n                  </Button>\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Panel;\n","import React from \"react\";\n\nconst defaultValue = {\n  liveMode: false,\n  setLiveMode: () => {},\n};\n\nexport const liveDataContext = React.createContext(defaultValue);\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport * as util from \"../../utility\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as actions from \"../../store/actions/portfolio\";\n\nconst DropDownBtn = ({ optionData }) => {\n  const [open, setOpen] = React.useState(false);\n  const anchorRef = React.useRef(null);\n  const { stockData } = useSelector((state) => state.portfolio);\n  const { currentPrice, volatility, interest } = stockData;\n  const dispatch = useDispatch();\n\n  const handleToggle = () => {\n    setOpen((prevOpen) => !prevOpen);\n  };\n\n  const handleClose = (event, newPortfolio) => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    if (newPortfolio) {\n      dispatch(\n        actions.setPortfolio(\n          newPortfolio(currentPrice, volatility, optionData, interest)\n        )\n      );\n    }\n\n    setOpen(false);\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === \"Tab\") {\n      event.preventDefault();\n      setOpen(false);\n    }\n  }\n\n  // return focus to the button when we transitioned from !open -> open\n  const prevOpen = React.useRef(open);\n  React.useEffect(() => {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n\n    prevOpen.current = open;\n  }, [open]);\n\n  return (\n    <div>\n      <Button\n        ref={anchorRef}\n        aria-controls={open ? \"menu-list-grow\" : undefined}\n        aria-haspopup=\"true\"\n        onClick={handleToggle}\n        color=\"inherit\"\n      >\n        View Sample Strategies\n      </Button>\n      <Popper\n        open={open}\n        anchorEl={anchorRef.current}\n        role={undefined}\n        transition\n        disablePortal\n      >\n        {({ TransitionProps, placement }) => (\n          <Grow\n            {...TransitionProps}\n            style={{\n              transformOrigin:\n                placement === \"bottom\" ? \"center top\" : \"center bottom\",\n            }}\n          >\n            <Paper>\n              <ClickAwayListener onClickAway={handleClose}>\n                <MenuList\n                  autoFocusItem={open}\n                  id=\"menu-list-grow\"\n                  onKeyDown={handleListKeyDown}\n                >\n                  <MenuItem\n                    onClick={(e) => handleClose(e, util.getBullCallSpread)}\n                  >\n                    Bull Call Spread\n                  </MenuItem>\n                  <MenuItem\n                    onClick={(e) => handleClose(e, util.getBearPutSpread)}\n                  >\n                    Bear Put Spread\n                  </MenuItem>\n                  <MenuItem\n                    onClick={(e) => handleClose(e, util.getLongStraddle)}\n                  >\n                    Long Straddle\n                  </MenuItem>\n                  <MenuItem\n                    onClick={(e) => handleClose(e, util.getShortStraddle)}\n                  >\n                    Short Straddle\n                  </MenuItem>\n                  <MenuItem\n                    onClick={(e) => handleClose(e, util.getLongButterfly)}\n                  >\n                    Long Butterfly\n                  </MenuItem>\n                  <MenuItem\n                    onClick={(e) => handleClose(e, util.getShortButterfly)}\n                  >\n                    Short Butterfly\n                  </MenuItem>\n                  <MenuItem onClick={(e) => handleClose(e, util.getLongCondor)}>\n                    Long Condor\n                  </MenuItem>\n                  <MenuItem\n                    onClick={(e) => handleClose(e, util.getShortCondor)}\n                  >\n                    Short Condor\n                  </MenuItem>\n                </MenuList>\n              </ClickAwayListener>\n            </Paper>\n          </Grow>\n        )}\n      </Popper>\n    </div>\n  );\n};\nexport default DropDownBtn;\n","import React, { useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { liveDataContext } from \"../../context/liveData\";\nimport Switch from \"@material-ui/core/Switch\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport DropDownBtn from \"./DropDownBtn\";\nimport { useDispatch } from \"react-redux\";\nimport * as actions from \"../../store/actions/portfolio\";\nimport GitHubIcon from \"@material-ui/icons/GitHub\";\nimport { IconButton } from \"@material-ui/core\";\nimport Brightness7Icon from \"@material-ui/icons/Brightness7\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  navbar: {\n    marginBottom: \"40px\",\n    position: \"relative\",\n    zIndex: \"10\",\n  },\n}));\n\nexport default function MenuAppBar({\n  setPortfolio,\n  optionData,\n  changeTheme,\n  theme,\n}) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { liveMode, setLiveMode } = useContext(liveDataContext);\n\n  return (\n    <AppBar position=\"static\" className={classes.navbar}>\n      <Toolbar>\n        <Typography variant=\"h3\" className={classes.title}>\n          Option Strategy Builder\n        </Typography>\n        <div onClick={changeTheme}>\n          {theme === \"dark\" ? <Brightness4Icon /> : <Brightness7Icon />}\n        </div>\n        <DropDownBtn setPortfolio={setPortfolio} optionData={optionData} />\n        <FormGroup>\n          <FormControlLabel\n            control={\n              <Switch\n                checked={liveMode}\n                onChange={() =>\n                  setLiveMode((prev) => {\n                    if (prev === true) dispatch(actions.resetData());\n                    return !prev;\n                  })\n                }\n                aria-label=\"live mode switch\"\n              />\n            }\n            label={\"Live Data Mode\"}\n          />\n        </FormGroup>\n        <IconButton\n          aria-label=\"delete\"\n          color=\"secondary\"\n          href=\"https://github.com/luisalfonsopreciado/finance-visualizer\"\n          target=\"_blank\"\n        >\n          <GitHubIcon />\n        </IconButton>\n      </Toolbar>\n    </AppBar>\n  );\n}\n","import React, { useState } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport symbols from \"../symbols.json\";\nimport { Button } from \"@material-ui/core\";\nimport { makeStyles, Container, Grid } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  item: {\n    // No Effect\n    height: \"100%\",\n    widht: \"100%\",\n  },\n});\n\nconst Search = ({ searchFunc }) => {\n  const [inputValue, setInputValue] = useState(\"\");\n  const classes = useStyles();\n\n  const filterOptions = (options, state) => {\n    // Extract the inputValue\n    const query = state.inputValue.toUpperCase();\n    // Update state\n    setInputValue(query);\n    // If short query return nothing (improves performance)\n    if (query.length <= 1) return [];\n\n    // Filter out the options\n    return options.filter((o) => o.displaySymbol.includes(query));\n  };\n\n  return (\n    <>\n      <Grid item md={11}>\n        {/* A Warning message is outputed in console: Fix later */}\n        <Autocomplete\n          id=\"combo-box-demo\"\n          color=\"primary\"\n          options={symbols}\n          getOptionLabel={(option) =>\n            option.displaySymbol + \": \" + option.description\n          }\n          filterOptions={(options, state) => filterOptions(options, state)}\n          className={classes.item}\n          renderInput={(params) => (\n            <TextField\n              {...params}\n              label=\"Search Ticker\"\n              variant=\"outlined\"\n              color=\"primary\"\n            />\n          )}\n          noOptionsText={\n            inputValue.length <= 1 ? \"Type a Ticker Symbol\" : \"No Symbols Found\"\n          }\n        />\n      </Grid>\n      <Grid item md={1}>\n        <Button\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={() => searchFunc(inputValue)}\n          className={classes.item}\n        >\n          Submit\n        </Button>\n      </Grid>\n    </>\n  );\n};\n\nexport default Search;\n","import React from \"react\";\nimport { Snackbar, IconButton} from \"@material-ui/core\";\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst Error = (props) => {\n\n  const handleClose = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    props.removeFunc();\n  };\n\n  return (\n    <Snackbar\n      anchorOrigin={{\n        vertical: \"top\",\n        horizontal: \"left\",\n      }}\n      open={true}\n      autoHideDuration={6000}\n      onClose={handleClose}\n      message={props.children}\n      action={\n        <React.Fragment>\n          <IconButton\n            size=\"small\"\n            aria-label=\"close\"\n            color=\"inherit\"\n            onClick={handleClose}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        </React.Fragment>\n      }\n    />\n  );\n};\nexport default Error;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Card } from \"react-bootstrap\";\nimport moment from \"moment\";\nimport { Typography } from \"@material-ui/core\";\n\nconst SecurityInfo = () => {\n  const { stockData } = useSelector((state) => state.portfolio);\n\n  return (\n    <Card variant=\"outlined\">\n      <Card.Body>\n        <Typography variant=\"h1\">{stockData.ticker}</Typography>\n        <Typography variant=\"h5\">Quote: {stockData.currentPrice}$</Typography>\n        <Typography variant=\"h6\">{moment(new Date()).format(\"YYYY-MM-DD\")}</Typography>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default SecurityInfo;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Slider from \"@material-ui/core/Slider\";\nimport TrendingUpIcon from \"@material-ui/icons/TrendingUp\";\n\nconst useStyles = makeStyles({\n  root: {\n    width: 250,\n  },\n  input: {\n    width: 42,\n  },\n  slider: { width: \"90%\" },\n});\n\nexport default function InputSlider({ value, setValue, title, min, max }) {\n  const classes = useStyles();\n\n  const handleSliderChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Typography id=\"input-slider\" gutterBottom>\n        {title}\n      </Typography>\n      <Grid container spacing={2} alignItems=\"center\">\n        <Grid item>\n          <TrendingUpIcon />\n        </Grid>\n        <Grid item xs>\n          <Slider\n            min={min}\n            max={max}\n            value={typeof value === \"number\" ? value : 0}\n            onChange={handleSliderChange}\n            aria-labelledby=\"input-slider\"\n            className={classes.slider}\n          />\n        </Grid>\n        <Grid item></Grid>\n      </Grid>\n    </div>\n  );\n}\n","import React from \"react\";\nimport AnyChart from \"anychart-react\";\nimport * as anychart from \"anychart\";\nimport * as util from \"../utility\";\n\nconst StockAnyChart = ({ data, ticker }) => {\n  const newData = [];\n  data.forEach((pnt) => {\n    newData.push([\n      util.UNIXToDateString(pnt[0] / 1000), // Divide by 1000 to convert to UNIX seconds\n      pnt[1],\n      pnt[2],\n      pnt[3],\n      pnt[4],\n    ]);\n  });\n  // Create the chart\n  var stockDataTable = anychart.data.table();\n  // Add The data\n  stockDataTable.addData(newData);\n  // Declare stock Chart\n  var chart = anychart.stock();\n  // Create plot\n  var firstPlot = chart.plot(0);\n  firstPlot.area(stockDataTable.mapAs({ value: 4 })).name(ticker);\n  chart.scroller().area(stockDataTable.mapAs({ value: 4 }));\n  chart.selectRange(\"2018-01-03\", \"2019-01-01\");\n\n  return (\n    <>\n      {!chart ? (\n        <h1>Unable to Display Data</h1>\n      ) : (\n        <AnyChart width=\"100%\" height={300} instance={chart} title={ticker} />\n      )}\n    </>\n  );\n};\n\nexport default StockAnyChart;\n","import React from \"react\";\nimport Highcharts from \"highcharts\";\nimport HighchartsReact from \"highcharts-react-official\";\n\nconst PayoffHighChart = ({ data }) => {\n  return <HighchartsReact highcharts={Highcharts} options={data} />;\n};\n\nexport default PayoffHighChart;\n","import React from \"react\";\nimport HighStock from \"highcharts/highstock\";\nimport HighchartsReact from \"highcharts-react-official\";\n\nfunction App({ mockData, ticker }) {\n  let groupingUnits = [\n    [\n      \"week\", // unit name\n      [1], // allowed multiples\n    ],\n    [\"month\", [1, 2, 3, 4, 6]],\n  ];\n\n  let mockOptions = {\n    rangeSelector: {\n      selected: 1,\n    },\n\n    title: {\n      text: ticker + \" Historical\",\n    },\n\n    yAxis: [\n      {\n        labels: {\n          align: \"right\",\n          x: -3,\n        },\n        title: {\n          text: \"OHLC\",\n        },\n        height: \"60%\",\n        lineWidth: 2,\n        resize: {\n          enabled: true,\n        },\n      },\n      {\n        labels: {\n          align: \"right\",\n          x: -3,\n        },\n        title: {\n          text: \"Volume\",\n        },\n        top: \"65%\",\n        height: \"35%\",\n        offset: 0,\n        lineWidth: 2,\n      },\n    ],\n\n    tooltip: {\n      split: true,\n    },\n\n    series: [\n      {\n        type: \"candlestick\",\n        data: mockData,\n        dataGrouping: {\n          units: groupingUnits,\n        },\n      },\n      {\n        type: \"column\",\n        data: (function () {\n          var columnData = [];\n\n          for (var i = 0; i < mockData.length; i++) {\n            columnData.push([\n              mockData[i][0], // the date\n              mockData[i][5], // the volume\n            ]);\n          }\n          return columnData;\n        })(),\n        yAxis: 1,\n      },\n    ],\n  };\n\n  return (\n    <div className=\"App\">\n      {\n        <HighchartsReact\n          highcharts={HighStock}\n          constructorType={\"stockChart\"}\n          options={mockOptions}\n        />\n      }\n    </div>\n  );\n}\n\nexport default App;\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport Payoff from \"./components/Payoff\";\nimport StockData from \"./components/StockData\";\nimport Panel from \"./components/Panel\";\nimport * as util from \"./utility\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Navigation from \"./components/Navigation/Navigation\";\nimport moment from \"moment\";\nimport { liveDataContext } from \"./context/liveData\";\nimport Search from \"./components/Search\";\nimport axios from \"axios\";\nimport ColorPicker from \"./utility/DS/ColorPicker\";\nimport * as actions from \"./store/actions/portfolio\";\nimport useUpdateEffect from \"./hooks/useUpdateEffect\";\nimport Error from \"./components/Error/Error\";\nimport SecurityInfo from \"./components/SecurityInfo\";\nimport Slider from \"./components/Slider\";\nimport AnyChart from \"./components/StockAnyChart\";\nimport { Switch, Typography, makeStyles } from \"@material-ui/core\";\nimport { FormGroup, FormControlLabel, Container } from \"@material-ui/core\";\nimport { Card, CardContent, TextField } from \"@material-ui/core\";\nimport { Grid } from \"@material-ui/core\";\nimport HighChart from \"./components/PayoffHighChart\";\nimport HighStock from \"./components/HighStock\";\n\nconst useStyles = makeStyles({\n  payoff: {\n    height: \"100%\",\n  },\n});\n\nconst App = ({ changeTheme, theme }) => {\n  const { portfolio, stockData } = useSelector((state) => state.portfolio);\n  const { volatility, interest, currentPrice } = stockData;\n  const dispatch = useDispatch();\n  const [data, setData] = useState(null);\n  const [errors, setErrors] = useState(null);\n  const [stockErrors, setStockErrors] = useState(null);\n  const [liveMode, setLiveMode] = useState(false);\n  const [optionData, setOptionData] = useState();\n  const [minX, setMinX] = useState();\n  const [maxX, setMaxX] = useState();\n  const [stockChartData, setStockChartData] = useState();\n  const [viewHighChart, setViewHighChart] = useState(true);\n  const [viewHighStock, setViewHighStock] = useState(true);\n  const [hcData, setHcData] = useState(null);\n  const value = { liveMode, setLiveMode };\n  const [daysToExpiration, setDaysToExpiration] = useState(null);\n  const classes = useStyles();\n\n  // Set Error Message as JSX\n  const setErrs = useCallback((message) => {\n    setErrors(<Error removeFunc={() => setErrors(null)}>{message}</Error>);\n  }, []);\n\n  // Set Error Stock Message as JSX\n  const setStockErrs = useCallback((message) => {\n    setStockErrors(\n      <Error removeFunc={() => setStockErrors(null)}>{message}</Error>\n    );\n  }, []);\n\n  // Update and Validate User Input Data\n  const updateData = () => {\n    // Validate Empty Portfolio\n    if (Object.keys(portfolio).length === 0)\n      return setErrs(\"Add contracts to Visualize\");\n\n    // Validate Stock Price\n    if (+stockData.currentPrice <= 0)\n      return setErrs(\"Please Enter a Valid Stock Price\");\n\n    // Validate Interest\n    if (isNaN(+stockData.interest))\n      return setErrs(\"Please Enter a Valid Interest Rate\");\n\n    const strikes = [];\n    let maxStrike = 0;\n    let minStrike = Infinity;\n\n    const values = [];\n    const theoretical = [];\n\n    // Add the min/max x values input by the user and update the max/minStrikes\n    if (maxX) {\n      if (+maxX > maxStrike) maxStrike = +maxX;\n      if (+maxX < minStrike) minStrike = +maxX;\n      strikes.push(+maxX);\n    }\n\n    if (minX) {\n      if (+minX > maxStrike) maxStrike = +minX;\n      if (+minX < minStrike) minStrike = +minX;\n      strikes.push(+minX);\n    }\n\n    // Get the Critical strikes to plot\n    for (let id in portfolio) {\n      const contract = portfolio[id];\n      const cashContract = contract.type === util.CASH;\n      const strike = cashContract ? +stockData.currentPrice : +contract.strike;\n      const date = contract.date;\n      const amount = contract.amount;\n\n      // Always Validate Amount\n      if (amount <= 0) return setErrs(\"Please Enter a Valid Amount\");\n\n      // If not a Cash Contract then validate the following fields\n      if (!cashContract) {\n        // Validate Strike prices\n        if (strike <= 0) return setErrs(\"Please Enter A Valid Strike Price\");\n\n        // Validate the Date (Check if it is defined and in the future)\n        if (!date || moment().diff(date) > 0)\n          return setErrs(\"Please Enter a Valid Date\");\n      }\n\n      // Apply To Fixed\n      strikes.push(util.round(strike));\n\n      // Update the maxStrike\n      if (strike > maxStrike) maxStrike = strike;\n      if (strike < minStrike) minStrike = strike;\n    }\n\n    const average = (maxStrike + minStrike) / 2;\n    let max = 0;\n\n    // If maxX is set\n    if (!maxX) {\n      // Auto xMax margin\n      max = Math.floor(maxStrike + average * 0.2);\n    } else {\n      max = Math.max(+maxX, maxStrike);\n    }\n\n    let min = 0;\n\n    // If minX is set\n    if (!minX) {\n      // Auto xMin Margin\n      min = Math.floor(minStrike - average * 0.2);\n    } else {\n      min = Math.min(+minX, minStrike);\n    }\n\n    const change = (max - min) / 35;\n\n    // Add domain limits\n    strikes.push(min);\n    strikes.push(max);\n\n    setMaxX(max);\n    setMinX(min);\n\n    let i = min;\n    // Add The rest of the strikes for continuous feel\n    while (i < max) {\n      // Round to 2 decimals and convert back to number\n      strikes.push(util.round(i));\n      i += change;\n    }\n\n    // Sort the strikes so the graph can be displayed properly\n    strikes.sort((a, b) => a - b);\n\n    const result = [];\n\n    // Helper DS to fetch colors\n    const colors = new ColorPicker();\n\n    // We want our plot to have N lines (N is the number of contracts in portfolio)\n    for (let id in portfolio) {\n      const contract = portfolio[id];\n      let key =\n        contract.direction + \" \" + contract.type + \" \" + contract.strike;\n      // Adjust title if cash contract\n      if (contract.type === util.CASH) {\n        key =\n          contract.direction +\n          \" \" +\n          contract.type +\n          \"  \" +\n          stockData.currentPrice;\n      }\n\n      result.push({\n        values: [],\n        key,\n        color: colors.getColor(),\n        disabled: true,\n      });\n    }\n\n    // Keey track of min/max for Ydomain\n    let minProfit = Infinity;\n    let maxProfit = -Infinity;\n\n    // For each strike, calculate the payoff and add it to values\n    for (let strike of strikes) {\n      let profitSum = 0;\n      let theoreticalPL = 0;\n      // Keep track of the index we are at\n      let i = 0;\n      for (let id in portfolio) {\n        const contract = portfolio[id];\n\n        // Calculate profit at given Strike (at Expiration)\n        const profitAtStrike = util.round(\n          util.evaluatePayoffFunc(contract, strike, stockData)\n        );\n\n        // Calculate dateDifference in years, used in theoretical black scholes\n        const dateDiff = -moment().diff(contract.date, \"years\", true);\n\n        const blackScholesValue = util.BlackScholes(\n          contract.type,\n          +strike,\n          +contract.strike,\n          +dateDiff,\n          +stockData.interest,\n          +stockData.volatility\n        );\n\n        // If the contract is Cash\n        if (contract.type === util.CASH) {\n          // Just add the profit at Strike\n          theoreticalPL += +profitAtStrike;\n        } else {\n          // Calculate depending on Buy/Sell\n          if (contract.direction === util.BUY) {\n            // Calculate Theoretical P/L\n            theoreticalPL +=\n              (blackScholesValue - contract.price) * contract.amount;\n          } else {\n            theoreticalPL +=\n              (contract.price - blackScholesValue) * contract.amount;\n          }\n        }\n\n        // Update min and max Profits\n        if (profitAtStrike > maxProfit) maxProfit = profitAtStrike;\n\n        if (profitAtStrike < minProfit) minProfit = profitAtStrike;\n\n        // Push the point at the specified strategy\n        result[i].values.push({\n          x: util.round(strike),\n          y: util.round(profitAtStrike),\n        });\n\n        // Evaluate each contract in portfolio and add it to the y value\n        profitSum += util.round(profitAtStrike);\n        i++;\n      }\n\n      // Add the point to the data\n      values.push({ x: util.round(strike), y: util.round(profitSum) });\n      theoretical.push({ x: util.round(strike), y: util.round(theoreticalPL) });\n    }\n\n    const Ydomain = [Math.floor(minProfit * 1.2), Math.floor(maxProfit * 1.2)];\n\n    // The overall strategy plot data\n    const strategyData = {\n      values,\n      key: \"Strategy\",\n      color: \"green\",\n      disabled: false,\n    };\n\n    // The Theoretical strategy plot data\n    const strategyTheoretical = {\n      values: theoretical,\n      key: \"Today\",\n      color: \"pink\",\n      disabled: false,\n    };\n\n    result.push(strategyTheoretical);\n\n    result.push(strategyData);\n\n    // Clear the Errors\n    setErrors(null);\n\n    if (viewHighChart) {\n      const res = [];\n      // Parse data into HighChart Format\n      for (let series of result) {\n        const seriesInfo = {\n          data: [],\n          visible: !series.disabled,\n          color: series.color,\n          name: series.key,\n        };\n        res.push(seriesInfo);\n        for (let point of series.values) {\n          seriesInfo.data.push([+point.x, +point.y]);\n        }\n      }\n\n      return setHcData({\n        series: res,\n        xAxis: {\n          title: {\n            text: \"Stock Price ($)\",\n          },\n        },\n        yAxis: {\n          title: {\n            text: \"Profit ($)\",\n          },\n        },\n        chart: {\n          type: \"spline\",\n        },\n        title: {\n          text: \"\",\n        },\n      });\n    }\n\n    setData({ data: result, Ydomain });\n  };\n\n  // Custom hook used to Reset Portfolio only when liveMode is Toggled\n  useUpdateEffect(() => {\n    // To be run on update\n    setErrors(null);\n    dispatch(actions.resetPortfolio());\n    setData(null);\n    setOptionData(null);\n  }, [liveMode]);\n\n  // Custom hook used to Reset Porfolio only when optionData changes\n  useUpdateEffect(() => {\n    dispatch(actions.resetPortfolio());\n    setStockChartData(null); // Display Loading\n    // fetchStockData();\n  }, [optionData]);\n\n  // Updating data to display\n  useEffect(() => {\n    updateData();\n  }, [portfolio, maxX, minX, viewHighChart]);\n\n  // Fetch the option Data when Search is Clicked\n  const fetchOptionData = async (ticker) => {\n    try {\n      const { data } = await axios.get(\n        `https://finnhub.io/api/v1/stock/option-chain?symbol=${ticker}&token=` +\n          process.env.REACT_APP_API_KEY\n      );\n      setOptionData(data);\n      dispatch(actions.updateStockData(\"currentPrice\", data.lastTradePrice));\n      dispatch(actions.updateStockData(\"ticker\", data.code));\n      if (data.data.length === 0) {\n        setStockErrs(util.STOCK_NO_OPTIONS, setStockErrors);\n      } else {\n        setStockErrors(null);\n        fetchStockData(ticker);\n      }\n    } catch (err) {\n      setStockErrs(util.STOCK_ERR_FETCH, setStockErrors);\n    }\n  };\n\n  const fetchStockData = async (ticker) => {\n    var unix = Math.round(+new Date() / 1000);\n    try {\n      const { data } = await axios.get(\n        `https://finnhub.io/api/v1/stock/candle?symbol=${ticker}&resolution=D&from=1199145600&to=${unix}&token=` +\n          process.env.REACT_APP_API_KEY\n      );\n\n      const length = data.c.length;\n\n      const result = [];\n\n      // Unix milliseconds\n      for (let i = 0; i < length; i++) {\n        result.push([\n          data.t[i] * 1000,\n          data.o[i],\n          data.h[i],\n          data.l[i],\n          data.c[i],\n        ]);\n      }\n      console.log(result);\n      setStockChartData(result);\n    } catch (err) {\n      setStockErrs(err.message + stockData.ticker);\n    }\n  };\n\n  const updateDaysToExpiration = (days) => {\n    let newDate = util.addDays(new Date(), days);\n    newDate = moment(newDate).format(\"YYYY-MM-DD\");\n    dispatch(actions.updateAllContracts(\"date\", newDate));\n    setDaysToExpiration(days);\n  };\n\n  return (\n    <>\n      <liveDataContext.Provider value={value}>\n        <Navigation\n          optionData={optionData}\n          changeTheme={changeTheme}\n          theme={theme}\n        />\n        <Container>\n          <Grid container spacing={1}>\n            <Grid item md={12}>\n              {stockData.ticker !== \"Theoretical\" && <SecurityInfo />}\n            </Grid>\n            <Grid item md={12}>\n              <Grid container>\n                {liveMode && <Search searchFunc={fetchOptionData} />}\n                {stockErrors}\n              </Grid>\n            </Grid>\n            <Grid item md={12}>\n              <Panel\n                optionData={optionData}\n                portfolio={portfolio}\n                visualize={updateData}\n              />\n            </Grid>\n            <Grid item md={3}>\n              <Grid container spacing={1}>\n                <Grid item md={12}>\n                  <StockData liveMode={liveMode} />\n                </Grid>\n                <Grid item md={12}>\n                  <Card variant=\"outlined\">\n                    <CardContent>\n                      <Slider\n                        min={0}\n                        max={150}\n                        title={\"Volatility\"}\n                        value={+volatility}\n                        setValue={(val) =>\n                          dispatch(actions.updateStockData(\"volatility\", val))\n                        }\n                      />\n                      <Slider\n                        min={-20}\n                        max={150}\n                        title={\"Interest\"}\n                        value={+interest}\n                        setValue={(val) =>\n                          dispatch(actions.updateStockData(\"interest\", val))\n                        }\n                      />\n                      {!liveMode && (\n                        <Slider\n                          min={1}\n                          max={1000}\n                          title={\"Time To Expiration\"}\n                          value={daysToExpiration}\n                          setValue={(val) => updateDaysToExpiration(val)}\n                        />\n                      )}\n                      {!liveMode && (\n                        <Slider\n                          min={0}\n                          max={2000}\n                          title={\"StockPrice\"}\n                          value={currentPrice}\n                          setValue={(val) =>\n                            dispatch(\n                              actions.updateStockData(\"currentPrice\", val)\n                            )\n                          }\n                        />\n                      )}\n                    </CardContent>\n                  </Card>\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid item md={9}>\n              {errors ? errors : null}\n              <Card variant=\"outlined\" className={classes.payoff}>\n                <CardContent>\n                  <FormGroup>\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={!viewHighChart}\n                          onChange={() => setViewHighChart((prev) => !prev)}\n                          aria-label=\"live mode switch\"\n                        />\n                      }\n                      label={\"Switch Graph Type\"}\n                    />\n                  </FormGroup>\n\n                  {!viewHighChart ? (\n                    <Payoff data={data} />\n                  ) : (\n                    <HighChart data={hcData} />\n                  )}\n                  <Grid container>\n                    <Grid item md={2}>\n                      <TextField\n                        id=\"outlined-number\"\n                        label=\"Low\"\n                        placeholder=\"Auto\"\n                        type=\"number\"\n                        InputLabelProps={{\n                          shrink: true,\n                        }}\n                        onBlur={(e) => setMinX(e.target.value)}\n                        variant=\"outlined\"\n                      />\n                    </Grid>\n                    <Grid item md={8}></Grid>\n                    <Grid item md={2}>\n                      <TextField\n                        id=\"outlined-number\"\n                        label=\"High\"\n                        placeholder=\"Auto\"\n                        type=\"number\"\n                        InputLabelProps={{\n                          shrink: true,\n                        }}\n                        onBlur={(e) => setMaxX(e.target.value)}\n                        variant=\"outlined\"\n                      />\n                    </Grid>\n                  </Grid>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item md={12}>\n              <Card variant=\"outlined\">\n                <CardContent>\n                  <FormGroup>\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={!viewHighStock}\n                          onChange={() => setViewHighStock((prev) => !prev)}\n                          aria-label=\"live mode switch\"\n                        />\n                      }\n                      label={\"Switch Chart Type\"}\n                    />\n                  </FormGroup>\n                  {stockChartData && optionData ? (\n                    <>\n                      {viewHighStock ? (\n                        <HighStock\n                          mockData={stockChartData}\n                          ticker={stockData.ticker}\n                        />\n                      ) : (\n                        <AnyChart\n                          data={stockChartData}\n                          ticker={stockData.ticker}\n                        />\n                      )}\n                    </>\n                  ) : (\n                    <>\n                      {optionData && liveMode ? (\n                        <Typography variant=\"h1\">Loading...</Typography>\n                      ) : (\n                        <>\n                          {!liveMode && (\n                            <>\n                              <Typography variant=\"h3\">\n                                Switch to live mode to view stock chart\n                              </Typography>\n                            </>\n                          )}\n                        </>\n                      )}\n                    </>\n                  )}\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </Container>\n      </liveDataContext.Provider>\n    </>\n  );\n};\n\nexport default App;\n","import * as cts from \"../actions/portfolio\";\nimport {\n  initialPortfolio,\n  updatePortfolioPrices,\n} from \"../../utility/constants\";\nimport { stockDataInitialState } from \"../../utility/constants\";\n\nexport const initialState = {\n  portfolio: { ...initialPortfolio },\n  stockData: { ...stockDataInitialState },\n};\n\nconst resetPortfolio = (state, action) => {\n  return { portfolio: {}, stockData: { ...state.stockData } };\n};\n\nconst removeContract = (state, action) => {\n  const newPortfolio = { ...state.portfolio };\n  delete newPortfolio[action.contractId];\n  return { portfolio: newPortfolio, stockData: { ...state.stockData } };\n};\n\nconst addContract = (state, action) => {\n  const { contractName } = action.newContract;\n  const newPortfolio = { ...state.portfolio };\n  newPortfolio[contractName] = action.newContract;\n  updatePortfolioPrices(newPortfolio, state.stockData);\n  return { portfolio: newPortfolio, stockData: { ...state.stockData } };\n};\n\nconst updateContract = (state, action) => {\n  const newPortfolio = { ...state.portfolio };\n  newPortfolio[action.contractName][action.property] = action.value;\n  updatePortfolioPrices(newPortfolio, state.stockData);\n  return { portfolio: newPortfolio, stockData: { ...state.stockData } };\n};\n\nconst setPortfolio = (state, action) => {\n  updatePortfolioPrices(action.newPortfolio, state.stockData);\n  return { portfolio: action.newPortfolio, stockData: { ...state.stockData } };\n};\n\nconst updatePrices = (state, action) => {\n  const newPortfolio = { ...state.portfolio };\n  updatePortfolioPrices(newPortfolio, state.stockData);\n  return { portfolio: newPortfolio, stockData: { ...state.stockData } };\n};\n\nconst updateStockData = (state, action) => {\n  const newStockData = { ...state.stockData };\n  newStockData[action.property] = action.value;\n  const newPortfolio = { ...state.portfolio };\n  updatePortfolioPrices(newPortfolio, newStockData);\n  return {\n    portfolio: newPortfolio,\n    stockData: newStockData,\n  };\n};\n\nconst updateAllContracts = (state, action) => {\n  const newPortfolio = { ...state.portfolio };\n  for (let key in newPortfolio) {\n    const contract = newPortfolio[key];\n    contract[action.property] = action.value;\n  }\n  updatePortfolioPrices(state.portfolio, state.stockData);\n  return { portfolio: newPortfolio, stockData: { ...state.stockData } };\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    // Portfolio\n    case cts.ADD_CONTRACT:\n      return addContract(state, action);\n    case cts.RESET_PORTFOLIO:\n      return resetPortfolio(state, action);\n    case cts.SET_PORTFOLIO:\n      return setPortfolio(state, action);\n    case cts.REMOVE_CONTRACT:\n      return removeContract(state, action);\n    case cts.UPDATE_CONTRACT:\n      return updateContract(state, action);\n    case cts.UPDATE_PRICES:\n      return updatePrices(state, action);\n    case cts.UPDATE_ALL_CONTRACTS:\n      return updateAllContracts(state, action);\n\n    // Stock Data\n    case cts.UPDATE_STOCK_DATA:\n      return updateStockData(state, action);\n    case cts.RESET_DATA:\n      return { ...state, stockData: { ...stockDataInitialState } };\n    default:\n      // Will be run initially\n      return state;\n  }\n};\n","import React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport portfolioReducer from \"./store/reducers/portfolio\";\nimport { createStore, combineReducers } from \"redux\";\nimport { ThemeProvider, createMuiTheme, Paper } from \"@material-ui/core\";\n\nconst rootReducer = combineReducers({\n  portfolio: portfolioReducer,\n});\n\nconst store = createStore(rootReducer);\n\nconst Index = () => {\n  const [darkState, setDarkState] = useState(false);\n  const palletType = darkState ? \"dark\" : \"light\";\n\n  const theme = createMuiTheme({\n    palette: {\n      type: palletType,\n    },\n  });\n\n  const handleThemeChange = () => {\n    setDarkState(!darkState);\n  };\n\n  return (\n    <React.StrictMode>\n      <Provider store={store}>\n        <ThemeProvider theme={theme}>\n          <Paper>\n            <App changeTheme={handleThemeChange} theme={palletType} />\n          </Paper>\n        </ThemeProvider>\n      </Provider>\n    </React.StrictMode>\n  );\n};\n\nReactDOM.render(<Index />, document.getElementById(\"root\"));\n"],"sourceRoot":""}